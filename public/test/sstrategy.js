/*

* File : sstrategy.js
* Versione : 1.0.0
* Tipo : Javascript
* Data : 2018-04-17
* Autore : SWEefty Team
* E-mail : sweeftyteam@gmail.com
*
* Licenza : GPLv3
*
* Descrizione: unit tests per strategia stackcleaner
*
* Registro modifiche :
* Lisa Parma         || 2018-04-17 || Implementazione test
* Lisa Parma         || 2018-04-17 || Creazione file
*
*/
const d = require('../components/dataCleaner');
var assert = require('assert');
const SStrategy = require('../components/strategies/stackcleaner');
const chai = require('chai')
const should = chai.should();


const tmpData = [
  {
    "data": {
      "took": 175,
      "timed_out": false,
      "_shards": {
        "total": 5,
        "successful": 5,
        "skipped": 0,
        "failed": 0
      },
      "hits": {
        "total": 10,
        "max_score": 1,
        "hits": [
          {
            "_index": "stagemonitor-spans-2018.03.25",
            "_type": "spans",
            "_id": "hBsoXmIBoU95GQ085-YL",
            "_score": 1,
            "_source": {
              "duration_cpu_ms": 15.983589,
              "instance": "dev",
              "http.headers.accept-language": "en-US,en;q=0.9,it;q=0.8",
              "tracking.unique_visitor_id": "1777b5fde5288fac54a8cbda59deaf27f22b4063",
              "http.url": "/spring-petclinic/owners/find",
              "type": "http",
              "http.headers.accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",
              "error": false,
              "http.headers.referer": "http://34.245.47.230/spring-petclinic/",
              "user_agent.type": "Browser",
              "http.headers.connection": "close",
              "http.headers.host": "localhost:8080",
              "span.kind": "server",
              "host": "ip-172-31-22-53",
              "user_agent.os_version": "10.11.6",
              "id": "fec35e505b75754e",
              "user_agent.browser": "Chrome",
              "call_tree_ascii": "----------------------------------------------------------------------\nSelftime (ms)              Total (ms)                 Method signature\n----------------------------------------------------------------------\n000009.82  023% ██░░░░░░░░ 000043.30  100% ██████████ Init Find Form\n000001.10  003% ░░░░░░░░░░ 000033.49  077% ███████▓░░ └── FrameworkServlet#service\n000032.39  075% ███████░░░ 000032.39  075% ███████░░░     └── DispatcherServlet#render\n",
              "trace_id": "fec35e505b75754e",
              "method": "GET",
              "ip": "127.0.0.0",
              "user_agent.os_family": "OS X",
              "http.headers.user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "peer.port": 52078,
              "duration_ms": 37.266249,
              "http.status_code": 200,
              "http.headers.accept-encoding": "gzip, deflate",
              "@timestamp": "2018-03-25T17:16:00.910+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "OS X",
              "stagemonitor.version": "0.87.5",
              "http.referring_site": "34.245.47.230",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "Init Find Form",
              "http.headers.upgrade-insecure-requests": "1",
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.25",
            "_type": "spans",
            "_id": "hhsoXmIBoU95GQ086ub_",
            "_score": 1,
            "_source": {
              "trace_id": "50a80b9b6a09065e",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select distinct owner0_.id as id1_0_0_, pets1_.id as id1_1_1_, owner0_.first_name as first_na2_0_0_, owner0_.last_name as last_nam3_0_0_, owner0_.address as address4_0_0_, owner0_.city as city5_0_0_, owner0_.telephone as telephon6_0_0_, pets1_.name as name2_1_1_, pets1_.birth_date as birth_da3_1_1_, pets1_.owner_id as owner_id4_1_1_, pets1_.type_id as type_id5_1_1_, pets1_.owner_id as owner_id4_1_0__, pets1_.id as id1_1_0__ from owners owner0_ left outer join pets pets1_ on owner0_.id=pets1_.owner_id where owner0_.last_name like '%'",
              "type": "jdbc",
              "error": false,
              "duration_ms": 0.664419,
              "db.user": "SA",
              "@timestamp": "2018-03-25T17:16:02.591+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "50a80b9b6a09065e",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "2fa1530d1f627391"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.25",
            "_type": "spans",
            "_id": "iBsoXmIBoU95GQ086ub_",
            "_score": 1,
            "_source": {
              "trace_id": "50a80b9b6a09065e",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select pettype0_.id as id1_3_0_, pettype0_.name as name2_3_0_ from types pettype0_ where pettype0_.id=6",
              "type": "jdbc",
              "error": false,
              "duration_ms": 0.191499,
              "db.user": "SA",
              "@timestamp": "2018-03-25T17:16:02.609+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "50a80b9b6a09065e",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "a6ff7f9fb87f3182"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.25",
            "_type": "spans",
            "_id": "whsoXmIBoU95GQ08kOSy",
            "_score": 1,
            "_source": {
              "timing.time_to_first_paint": 886,
              "instance": "dev",
              "timing.app_cache_lookup": 0,
              "http.url": "http://34.245.47.230/spring-petclinic/",
              "type": "pageload",
              "error": false,
              "timing.processing": 609,
              "user_agent.type": "Browser",
              "span.kind": "client",
              "host": "ip-172-31-22-53",
              "sampling.priority": 1,
              "user_agent.os_version": "10.11.6",
              "id": "6faaaad37b32a4a9",
              "timing.load": 2,
              "timing.request": 109,
              "timing.unload": 0,
              "timing.resource": 396,
              "user_agent.browser": "Chrome",
              "trace_id": "379b94606b4fb1aa",
              "timing.tcp": 0,
              "timing.redirect": 0,
              "user_agent.header": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "ip": "127.0.0.0",
              "user_agent.os_family": "OS X",
              "timing.dns_lookup": 0,
              "duration_ms": 610,
              "@timestamp": "2018-03-25T17:15:38.228+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "OS X",
              "timing.ssl": 0,
              "stagemonitor.version": "0.87.5",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "/spring-petclinic/",
              "timing.response": 287,
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.25",
            "_type": "spans",
            "_id": "CBslXmIBoU95GQ08Fdi2",
            "_score": 1,
            "_source": {
              "instance": "dev",
              "timing.app_cache_lookup": 0,
              "http.url": "http://34.245.47.230/spring-petclinic/",
              "type": "pageload",
              "error": false,
              "timing.processing": 17407,
              "user_agent.type": "Browser",
              "span.kind": "client",
              "host": "ip-172-31-22-53",
              "sampling.priority": 1,
              "user_agent.os_version": "10.11.6",
              "id": "60555d352871958d",
              "timing.load": 3,
              "timing.unload": 0,
              "timing.request": 637,
              "timing.resource": 1542,
              "user_agent.browser": "Chrome",
              "trace_id": "2c2897dae7e0a398",
              "timing.tcp": 0,
              "timing.redirect": 0,
              "user_agent.header": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "ip": "127.0.0.0",
              "user_agent.os_family": "OS X",
              "timing.dns_lookup": 0,
              "duration_ms": 17408,
              "@timestamp": "2018-03-25T17:11:33.106+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "OS X",
              "timing.ssl": 0,
              "stagemonitor.version": "0.87.5",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "/spring-petclinic/",
              "timing.response": 905,
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.25",
            "_type": "spans",
            "_id": "WRsoXmIBoU95GQ08oOVr",
            "_score": 1,
            "_source": {
              "timing.time_to_first_paint": 851,
              "instance": "dev",
              "timing.app_cache_lookup": 0,
              "http.url": "http://34.245.47.230/spring-petclinic/owners/find",
              "type": "pageload",
              "error": false,
              "timing.processing": 428,
              "user_agent.type": "Browser",
              "span.kind": "client",
              "host": "ip-172-31-22-53",
              "sampling.priority": 1,
              "user_agent.os_version": "10.11.6",
              "id": "d7199723cfb361ca",
              "timing.load": 2,
              "timing.request": 581,
              "timing.unload": 0,
              "timing.resource": 892,
              "user_agent.browser": "Chrome",
              "trace_id": "2a3a88eb0dc0b993",
              "timing.tcp": 0,
              "timing.redirect": 0,
              "user_agent.header": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "ip": "127.0.0.0",
              "user_agent.os_family": "OS X",
              "timing.dns_lookup": 0,
              "duration_ms": 1028,
              "@timestamp": "2018-03-25T17:15:42.523+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "OS X",
              "timing.ssl": 0,
              "stagemonitor.version": "0.87.5",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "/spring-petclinic/owners/find",
              "timing.response": 311,
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.25",
            "_type": "spans",
            "_id": "WBsoXmIBoU95GQ08oOVr",
            "_score": 1,
            "_source": {
              "duration_cpu_ms": 347.15079,
              "instance": "dev",
              "http.headers.accept-language": "en-US,en;q=0.9,it;q=0.8",
              "tracking.unique_visitor_id": "1777b5fde5288fac54a8cbda59deaf27f22b4063",
              "http.url": "/spring-petclinic/owners/find",
              "type": "http",
              "http.headers.accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",
              "error": false,
              "http.headers.referer": "http://34.245.47.230/spring-petclinic/",
              "user_agent.type": "Browser",
              "http.headers.connection": "close",
              "http.headers.host": "localhost:8080",
              "span.kind": "server",
              "host": "ip-172-31-22-53",
              "user_agent.os_version": "10.11.6",
              "id": "2a3a88eb0dc0b993",
              "user_agent.browser": "Chrome",
              "call_tree_ascii": "----------------------------------------------------------------------\nSelftime (ms)              Total (ms)                 Method signature\n----------------------------------------------------------------------\n000369.60  092% █████████░ 000400.06  100% ██████████ Init Find Form\n000001.17  000% ░░░░░░░░░░ 000030.46  008% ▓░░░░░░░░░ └── FrameworkServlet#service\n000029.29  007% ▓░░░░░░░░░ 000029.29  007% ▓░░░░░░░░░     └── DispatcherServlet#render\n",
              "trace_id": "2a3a88eb0dc0b993",
              "method": "GET",
              "ip": "127.0.0.0",
              "user_agent.os_family": "OS X",
              "http.headers.user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "peer.port": 51952,
              "duration_ms": 399.383739,
              "http.status_code": 200,
              "http.headers.accept-encoding": "gzip, deflate",
              "@timestamp": "2018-03-25T17:15:42.486+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "OS X",
              "parent_id": "d7199723cfb361ca",
              "stagemonitor.version": "0.87.5",
              "http.referring_site": "34.245.47.230",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "Init Find Form",
              "http.headers.upgrade-insecure-requests": "1",
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.25",
            "_type": "spans",
            "_id": "gxsoXmIBoU95GQ084-Ye",
            "_score": 1,
            "_source": {
              "timing.time_to_first_paint": 891,
              "instance": "dev",
              "timing.app_cache_lookup": 0,
              "http.url": "http://34.245.47.230/spring-petclinic/",
              "type": "pageload",
              "error": false,
              "timing.processing": 943,
              "user_agent.type": "Browser",
              "span.kind": "client",
              "host": "ip-172-31-22-53",
              "sampling.priority": 1,
              "user_agent.os_version": "10.11.6",
              "id": "f0ac05d1b42d223a",
              "timing.load": 5,
              "timing.request": 1,
              "timing.unload": 0,
              "timing.resource": 18,
              "user_agent.browser": "Chrome",
              "trace_id": "379b94606b4fb1aa",
              "timing.tcp": 0,
              "timing.redirect": 0,
              "user_agent.header": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "ip": "127.0.0.0",
              "user_agent.os_family": "OS X",
              "timing.dns_lookup": 0,
              "duration_ms": 1022,
              "@timestamp": "2018-03-25T17:15:59.000+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "OS X",
              "timing.ssl": 0,
              "stagemonitor.version": "0.87.5",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "/spring-petclinic/",
              "timing.response": 17,
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.25",
            "_type": "spans",
            "_id": "3hskXmIBoU95GQ08y9Zc",
            "_score": 1,
            "_source": {
              "duration_cpu_ms": 364.583532,
              "instance": "dev",
              "http.headers.accept-language": "en-US,en;q=0.9,it;q=0.8",
              "tracking.unique_visitor_id": "1777b5fde5288fac54a8cbda59deaf27f22b4063",
              "http.url": "/spring-petclinic/",
              "type": "http",
              "http.headers.accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",
              "error": false,
              "user_agent.type": "Browser",
              "http.headers.connection": "close",
              "http.headers.host": "localhost:8080",
              "span.kind": "server",
              "host": "ip-172-31-22-53",
              "user_agent.os_version": "10.11.6",
              "id": "2c2897dae7e0a398",
              "user_agent.browser": "Chrome",
              "call_tree_ascii": "----------------------------------------------------------------------\nSelftime (ms)              Total (ms)                 Method signature\n----------------------------------------------------------------------\n000361.54  083% ████████░░ 000435.59  100% ██████████ Welcome\n000001.20  000% ░░░░░░░░░░ 000074.05  017% █▓░░░░░░░░ └── FrameworkServlet#service\n000072.85  017% █▓░░░░░░░░ 000072.85  017% █▓░░░░░░░░     └── DispatcherServlet#render\n",
              "trace_id": "2c2897dae7e0a398",
              "method": "GET",
              "ip": "127.0.0.0",
              "user_agent.os_family": "OS X",
              "http.headers.user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "peer.port": 51744,
              "duration_ms": 434.578714,
              "http.status_code": 200,
              "http.headers.accept-encoding": "gzip, deflate",
              "@timestamp": "2018-03-25T17:11:31.678+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "OS X",
              "parent_id": "60555d352871958d",
              "stagemonitor.version": "0.87.5",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "Welcome",
              "http.headers.upgrade-insecure-requests": "1",
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.25",
            "_type": "spans",
            "_id": "hxsoXmIBoU95GQ086ub_",
            "_score": 1,
            "_source": {
              "trace_id": "50a80b9b6a09065e",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select pettype0_.id as id1_3_0_, pettype0_.name as name2_3_0_ from types pettype0_ where pettype0_.id=1",
              "type": "jdbc",
              "error": false,
              "duration_ms": 0.270042,
              "db.user": "SA",
              "@timestamp": "2018-03-25T17:16:02.600+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "50a80b9b6a09065e",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "c990dfd8a75a69b3"
            }
          }
        ]
      }
    },
    "status": 200,
    "config": {
      "method": "GET",
      "transformRequest": [
        null
      ],
      "transformResponse": [
        null
      ],
      "jsonpCallbackParam": "callback",
      "url": "../api/havana/index?index=stagemonitor-spans-2018.03.25",
      "headers": {
        "Accept": "application/json, text/plain, */*",
        "kbn-version": "6.2.2"
      }
    },
    "statusText": "OK"
  },
  {
    "data": {
      "took": 174,
      "timed_out": false,
      "_shards": {
        "total": 5,
        "successful": 5,
        "skipped": 0,
        "failed": 0
      },
      "hits": {
        "total": 10,
        "max_score": 1,
        "hits": [
          {
            "_index": "stagemonitor-spans-2018.03.29",
            "_type": "spans",
            "_id": "BWnacWIBoU95GQ08bj7K",
            "_score": 1,
            "_source": {
              "trace_id": "50e4dee9a2a478ec",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select distinct owner0_.id as id1_0_0_, pets1_.id as id1_1_1_, owner0_.first_name as first_na2_0_0_, owner0_.last_name as last_nam3_0_0_, owner0_.address as address4_0_0_, owner0_.city as city5_0_0_, owner0_.telephone as telephon6_0_0_, pets1_.name as name2_1_1_, pets1_.birth_date as birth_da3_1_1_, pets1_.owner_id as owner_id4_1_1_, pets1_.type_id as type_id5_1_1_, pets1_.owner_id as owner_id4_1_0__, pets1_.id as id1_1_0__ from owners owner0_ left outer join pets pets1_ on owner0_.id=pets1_.owner_id where owner0_.last_name like 'sdfsadf%'",
              "type": "jdbc",
              "error": false,
              "duration_ms": 12.807653,
              "db.user": "SA",
              "@timestamp": "2018-03-29T13:02:42.432+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "50e4dee9a2a478ec",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "ac1635daaaf968d7"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.29",
            "_type": "spans",
            "_id": "qmZKcWIBoU95GQ08Q_IW",
            "_score": 1,
            "_source": {
              "timing.time_to_first_paint": 603,
              "instance": "dev",
              "timing.app_cache_lookup": 4,
              "http.url": "http://34.245.47.230/spring-petclinic/",
              "type": "pageload",
              "error": false,
              "timing.processing": 572,
              "user_agent.type": "Browser",
              "span.kind": "client",
              "host": "ip-172-31-22-53",
              "sampling.priority": 1,
              "user_agent.os_version": "10.0",
              "id": "de7f407bf70bcd60",
              "timing.load": 2,
              "timing.request": 260,
              "timing.unload": 0,
              "timing.resource": 424,
              "user_agent.browser": "Chrome",
              "trace_id": "01637e2c866836fc",
              "timing.tcp": 41,
              "timing.redirect": 0,
              "user_agent.header": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "ip": "127.0.0.0",
              "user_agent.os_family": "Windows",
              "timing.dns_lookup": 0,
              "duration_ms": 881,
              "@timestamp": "2018-03-29T10:25:13.104+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "Windows",
              "timing.ssl": 0,
              "stagemonitor.version": "0.87.5",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "/spring-petclinic/",
              "timing.response": 119,
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.29",
            "_type": "spans",
            "_id": "qWZKcWIBoU95GQ08P_IU",
            "_score": 1,
            "_source": {
              "duration_cpu_ms": 30.135393,
              "instance": "dev",
              "http.headers.accept-language": "it-IT,it;q=0.9,en-US;q=0.8,en;q=0.7",
              "tracking.unique_visitor_id": "2a5a943dc195052d486d6dbd1feb3923686d669b",
              "http.url": "/spring-petclinic/",
              "type": "http",
              "http.headers.accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",
              "error": false,
              "user_agent.type": "Browser",
              "http.headers.connection": "close",
              "http.headers.host": "localhost:8080",
              "span.kind": "server",
              "host": "ip-172-31-22-53",
              "user_agent.os_version": "10.0",
              "id": "01637e2c866836fc",
              "user_agent.browser": "Chrome",
              "call_tree_ascii": "----------------------------------------------------------------------\nSelftime (ms)              Total (ms)                 Method signature\n----------------------------------------------------------------------\n000017.30  030% ██▓░░░░░░░ 000057.78  100% ██████████ Welcome\n000006.53  011% █░░░░░░░░░ 000040.47  070% ███████░░░ └── FrameworkServlet#service\n000033.94  059% █████▓░░░░ 000033.94  059% █████▓░░░░     └── DispatcherServlet#render\n",
              "trace_id": "01637e2c866836fc",
              "method": "GET",
              "ip": "127.0.0.0",
              "user_agent.os_family": "Windows",
              "http.headers.user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "peer.port": 42140,
              "duration_ms": 57.619109,
              "http.status_code": 200,
              "http.headers.accept-encoding": "gzip, deflate",
              "@timestamp": "2018-03-29T10:25:13.265+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "Windows",
              "parent_id": "de7f407bf70bcd60",
              "stagemonitor.version": "0.87.5",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "Welcome",
              "http.headers.upgrade-insecure-requests": "1",
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.29",
            "_type": "spans",
            "_id": "A2iZcWIBoU95GQ08k06c",
            "_score": 1,
            "_source": {
              "duration_cpu_ms": 14.759943,
              "instance": "dev",
              "http.headers.accept-language": "en-US,en;q=0.9,it;q=0.8,mt;q=0.7",
              "tracking.unique_visitor_id": "2a5a943dc195052d486d6dbd1feb3923686d669b",
              "http.url": "/spring-petclinic/",
              "type": "http",
              "http.headers.accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",
              "error": false,
              "user_agent.type": "Browser",
              "http.headers.connection": "close",
              "http.headers.host": "localhost:8080",
              "span.kind": "server",
              "host": "ip-172-31-22-53",
              "user_agent.os_version": "10.0",
              "id": "7c938ebe3bd81af2",
              "user_agent.browser": "Chrome",
              "call_tree_ascii": "----------------------------------------------------------------------\nSelftime (ms)              Total (ms)                 Method signature\n----------------------------------------------------------------------\n000004.24  020% ██░░░░░░░░ 000020.91  100% ██████████ Welcome\n000002.71  013% █░░░░░░░░░ 000016.68  080% ███████▓░░ └── FrameworkServlet#service\n000013.97  067% ██████▓░░░ 000013.97  067% ██████▓░░░     └── DispatcherServlet#render\n",
              "trace_id": "7c938ebe3bd81af2",
              "method": "GET",
              "ip": "127.0.0.0",
              "user_agent.os_family": "Windows",
              "http.headers.user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "peer.port": 42502,
              "duration_ms": 20.786527,
              "http.status_code": 200,
              "http.headers.accept-encoding": "gzip, deflate",
              "@timestamp": "2018-03-29T11:51:52.381+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "Windows",
              "parent_id": "ac4d0ea33670b842",
              "stagemonitor.version": "0.87.5",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "Welcome",
              "http.headers.upgrade-insecure-requests": "1",
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.29",
            "_type": "spans",
            "_id": "g2nacWIBoU95GQ08Wz0X",
            "_score": 1,
            "_source": {
              "timing.time_to_first_paint": 2374,
              "instance": "dev",
              "timing.app_cache_lookup": 1,
              "http.url": "http://34.245.47.230/spring-petclinic/",
              "type": "pageload",
              "error": false,
              "timing.processing": 320,
              "user_agent.type": "Browser",
              "span.kind": "client",
              "host": "ip-172-31-22-53",
              "sampling.priority": 1,
              "user_agent.os_version": "10.0",
              "id": "904df5f1ce20d3d5",
              "timing.load": 4,
              "timing.request": 2102,
              "timing.unload": 0,
              "timing.resource": 2264,
              "user_agent.browser": "Chrome",
              "trace_id": "ec76860dfe81268f",
              "timing.tcp": 42,
              "timing.redirect": 0,
              "user_agent.header": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "ip": "127.0.0.0",
              "user_agent.os_family": "Windows",
              "timing.dns_lookup": 0,
              "duration_ms": 2468,
              "@timestamp": "2018-03-29T13:02:35.357+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "Windows",
              "timing.ssl": 0,
              "stagemonitor.version": "0.87.5",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "/spring-petclinic/",
              "timing.response": 119,
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.29",
            "_type": "spans",
            "_id": "hGnacWIBoU95GQ08Xz0E",
            "_score": 1,
            "_source": {
              "duration_cpu_ms": 35.622374,
              "instance": "dev",
              "http.headers.accept-language": "it-IT,it;q=0.9,en-US;q=0.8,en;q=0.7",
              "tracking.unique_visitor_id": "2a5a943dc195052d486d6dbd1feb3923686d669b",
              "http.headers.x-b3-sampled": "1",
              "http.url": "/spring-petclinic/owners.html",
              "type": "http",
              "http.headers.accept": "*/*",
              "error": true,
              "http.headers.referer": "http://34.245.47.230/spring-petclinic/",
              "bytes_written": 149,
              "user_agent.type": "Browser",
              "http.headers.connection": "close",
              "http.headers.host": "localhost:8080",
              "span.kind": "server",
              "host": "ip-172-31-22-53",
              "http.headers.x-b3-spanid": "a379b97bcbafa5e1",
              "user_agent.os_version": "10.0",
              "id": "22d72c054e27f02a",
              "http.headers.x-requested-with": "XMLHttpRequest",
              "user_agent.browser": "Chrome",
              "call_tree_ascii": "----------------------------------------------------------------------\nSelftime (ms)              Total (ms)                 Method signature\n----------------------------------------------------------------------\n000039.01  029% ██▓░░░░░░░ 000134.82  100% ██████████ Error\n000004.85  004% ░░░░░░░░░░ 000004.85  004% ░░░░░░░░░░ ├── FrameworkServlet#service\n000090.96  067% ██████▓░░░ 000090.96  067% ██████▓░░░ └── FrameworkServlet#service\n",
              "trace_id": "a379b97bcbafa5e1",
              "method": "GET",
              "http.headers.x-b3-traceid": "a379b97bcbafa5e1",
              "ip": "127.0.0.0",
              "user_agent.os_family": "Windows",
              "http.headers.user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "peer.port": 42964,
              "duration_ms": 126.827804,
              "http.status_code": 404,
              "http.headers.accept-encoding": "gzip, deflate",
              "@timestamp": "2018-03-29T13:02:39.008+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "Windows",
              "parent_id": "a379b97bcbafa5e1",
              "stagemonitor.version": "0.87.5",
              "http.referring_site": "34.245.47.230",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "Error",
              "peer.ipv4_string": "127.0.0.0",
              "parameters": [
                {
                  "key": "lastName",
                  "value": ""
                }
              ]
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.29",
            "_type": "spans",
            "_id": "BGnacWIBoU95GQ08Zj70",
            "_score": 1,
            "_source": {
              "timing.time_to_first_paint": 400,
              "instance": "dev",
              "timing.app_cache_lookup": 0,
              "http.url": "http://34.245.47.230/spring-petclinic/owners/find",
              "type": "pageload",
              "error": false,
              "timing.processing": 205,
              "user_agent.type": "Browser",
              "span.kind": "client",
              "host": "ip-172-31-22-53",
              "sampling.priority": 1,
              "user_agent.os_version": "10.0",
              "id": "a4f5643988df8ffc",
              "timing.load": 1,
              "timing.request": 276,
              "timing.unload": 1,
              "timing.resource": 387,
              "user_agent.browser": "Chrome",
              "trace_id": "953b5c6fa0acb8b7",
              "timing.tcp": 0,
              "timing.redirect": 0,
              "user_agent.header": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "ip": "127.0.0.0",
              "user_agent.os_family": "Windows",
              "timing.dns_lookup": 0,
              "duration_ms": 510,
              "@timestamp": "2018-03-29T13:02:40.147+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "Windows",
              "timing.ssl": 0,
              "stagemonitor.version": "0.87.5",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "/spring-petclinic/owners/find",
              "timing.response": 111,
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.29",
            "_type": "spans",
            "_id": "BGiZcWIBoU95GQ08o05C",
            "_score": 1,
            "_source": {
              "timing.time_to_first_paint": 1741,
              "instance": "dev",
              "timing.app_cache_lookup": 1,
              "http.url": "http://34.245.47.230/spring-petclinic/",
              "type": "pageload",
              "error": false,
              "timing.processing": 1583,
              "user_agent.type": "Browser",
              "span.kind": "client",
              "host": "ip-172-31-22-53",
              "sampling.priority": 1,
              "user_agent.os_version": "10.0",
              "id": "ac4d0ea33670b842",
              "timing.load": 7,
              "timing.request": 166,
              "timing.unload": 0,
              "timing.resource": 645,
              "user_agent.browser": "Chrome",
              "trace_id": "7c938ebe3bd81af2",
              "timing.tcp": 44,
              "timing.redirect": 0,
              "user_agent.header": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "ip": "127.0.0.0",
              "user_agent.os_family": "Windows",
              "timing.dns_lookup": 0,
              "duration_ms": 2230,
              "@timestamp": "2018-03-29T11:51:54.720+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "Windows",
              "timing.ssl": 0,
              "stagemonitor.version": "0.87.5",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "/spring-petclinic/",
              "timing.response": 434,
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.29",
            "_type": "spans",
            "_id": "gmnacWIBoU95GQ08Vz0f",
            "_score": 1,
            "_source": {
              "duration_cpu_ms": 537.38167,
              "instance": "dev",
              "http.headers.accept-language": "it-IT,it;q=0.9,en-US;q=0.8,en;q=0.7",
              "tracking.unique_visitor_id": "2a5a943dc195052d486d6dbd1feb3923686d669b",
              "http.url": "/spring-petclinic/",
              "type": "http",
              "http.headers.accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",
              "error": false,
              "user_agent.type": "Browser",
              "http.headers.connection": "close",
              "http.headers.host": "localhost:8080",
              "span.kind": "server",
              "host": "ip-172-31-22-53",
              "user_agent.os_version": "10.0",
              "id": "ec76860dfe81268f",
              "user_agent.browser": "Chrome",
              "call_tree_ascii": "----------------------------------------------------------------------\nSelftime (ms)              Total (ms)                 Method signature\n----------------------------------------------------------------------\n000137.18  008% ▓░░░░░░░░░ 001622.01  100% ██████████ Welcome\n000092.12  006% ▓░░░░░░░░░ 001484.83  092% █████████░ └── FrameworkServlet#service\n001392.71  086% ████████▓░ 001392.71  086% ████████▓░     └── DispatcherServlet#render\n",
              "trace_id": "ec76860dfe81268f",
              "method": "GET",
              "ip": "127.0.0.0",
              "user_agent.os_family": "Windows",
              "http.headers.user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "peer.port": 42884,
              "duration_ms": 1614.6859,
              "http.status_code": 200,
              "http.headers.accept-encoding": "gzip, deflate",
              "@timestamp": "2018-03-29T13:02:35.530+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "Windows",
              "parent_id": "904df5f1ce20d3d5",
              "stagemonitor.version": "0.87.5",
              "user_agent.device": "Personal computer",
              "gc_time_ms": 97,
              "user_agent.browser_version": "65.0.3325.181",
              "name": "Welcome",
              "http.headers.upgrade-insecure-requests": "1",
              "peer.ipv4_string": "127.0.0.0"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.29",
            "_type": "spans",
            "_id": "B2nacWIBoU95GQ08bj7K",
            "_score": 1,
            "_source": {
              "timing.time_to_first_paint": 429,
              "instance": "dev",
              "timing.app_cache_lookup": 0,
              "http.url": "http://34.245.47.230/spring-petclinic/owners?lastName=sdfsadf",
              "type": "pageload",
              "error": false,
              "timing.processing": 181,
              "user_agent.type": "Browser",
              "span.kind": "client",
              "host": "ip-172-31-22-53",
              "sampling.priority": 1,
              "user_agent.os_version": "10.0",
              "id": "c79da00fad267d91",
              "timing.load": 1,
              "timing.request": 315,
              "timing.unload": 2,
              "timing.resource": 429,
              "user_agent.browser": "Chrome",
              "trace_id": "50e4dee9a2a478ec",
              "timing.tcp": 0,
              "timing.redirect": 0,
              "user_agent.header": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",
              "ip": "127.0.0.0",
              "user_agent.os_family": "Windows",
              "timing.dns_lookup": 0,
              "duration_ms": 525,
              "@timestamp": "2018-03-29T13:02:42.318+0000",
              "application": "Spring-Petclinic",
              "user_agent.os": "Windows",
              "timing.ssl": 0,
              "stagemonitor.version": "0.87.5",
              "user_agent.device": "Personal computer",
              "user_agent.browser_version": "65.0.3325.181",
              "name": "/spring-petclinic/owners",
              "timing.response": 114,
              "peer.ipv4_string": "127.0.0.0"
            }
          }
        ]
      }
    },
    "status": 200,
    "config": {
      "method": "GET",
      "transformRequest": [
        null
      ],
      "transformResponse": [
        null
      ],
      "jsonpCallbackParam": "callback",
      "url": "../api/havana/index?index=stagemonitor-spans-2018.03.29",
      "headers": {
        "Accept": "application/json, text/plain, */*",
        "kbn-version": "6.2.2"
      }
    },
    "statusText": "OK"
  },
  {
    "data": {
      "took": 131,
      "timed_out": false,
      "_shards": {
        "total": 5,
        "successful": 5,
        "skipped": 0,
        "failed": 0
      },
      "hits": {
        "total": 10,
        "max_score": 1,
        "hits": [
          {
            "_index": "stagemonitor-spans-2018.03.28",
            "_type": "spans",
            "_id": "9VPMbGIBoU95GQ08M1z2",
            "_score": 1,
            "_source": {
              "trace_id": "492223f90c99162e",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select visits0_.pet_id as pet_id4_6_0_, visits0_.id as id1_6_0_, visits0_.id as id1_6_1_, visits0_.visit_date as visit_da2_6_1_, visits0_.description as descript3_6_1_, visits0_.pet_id as pet_id4_6_1_ from visits visits0_ where visits0_.pet_id=12",
              "type": "jdbc",
              "error": false,
              "duration_ms": 0.282868,
              "db.user": "SA",
              "@timestamp": "2018-03-28T13:29:04.694+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "492223f90c99162e",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "4e856e58e918ec39"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.28",
            "_type": "spans",
            "_id": "8VPMbGIBoU95GQ08M1z2",
            "_score": 1,
            "_source": {
              "trace_id": "492223f90c99162e",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select pettype0_.id as id1_3_0_, pettype0_.name as name2_3_0_ from types pettype0_ where pettype0_.id=3",
              "type": "jdbc",
              "error": false,
              "duration_ms": 0.13352,
              "db.user": "SA",
              "@timestamp": "2018-03-28T13:29:04.683+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "492223f90c99162e",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "56633d60654a194c"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.28",
            "_type": "spans",
            "_id": "81PMbGIBoU95GQ08M1z2",
            "_score": 1,
            "_source": {
              "trace_id": "492223f90c99162e",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select pettype0_.id as id1_3_0_, pettype0_.name as name2_3_0_ from types pettype0_ where pettype0_.id=5",
              "type": "jdbc",
              "error": false,
              "duration_ms": 0.978125,
              "db.user": "SA",
              "@timestamp": "2018-03-28T13:29:04.688+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "492223f90c99162e",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "414e45639cccc21a"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.28",
            "_type": "spans",
            "_id": "9lPMbGIBoU95GQ08M1z2",
            "_score": 1,
            "_source": {
              "trace_id": "492223f90c99162e",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select visits0_.pet_id as pet_id4_6_0_, visits0_.id as id1_6_0_, visits0_.id as id1_6_1_, visits0_.visit_date as visit_da2_6_1_, visits0_.description as descript3_6_1_, visits0_.pet_id as pet_id4_6_1_ from visits visits0_ where visits0_.pet_id=11",
              "type": "jdbc",
              "error": false,
              "duration_ms": 0.139191,
              "db.user": "SA",
              "@timestamp": "2018-03-28T13:29:04.695+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "492223f90c99162e",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "e84f153a01200b9d"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.28",
            "_type": "spans",
            "_id": "8lPMbGIBoU95GQ08M1z2",
            "_score": 1,
            "_source": {
              "trace_id": "492223f90c99162e",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select pettype0_.id as id1_3_0_, pettype0_.name as name2_3_0_ from types pettype0_ where pettype0_.id=4",
              "type": "jdbc",
              "error": false,
              "duration_ms": 0.135892,
              "db.user": "SA",
              "@timestamp": "2018-03-28T13:29:04.684+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "492223f90c99162e",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "8254a27499cd6ca9"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.28",
            "_type": "spans",
            "_id": "9FPMbGIBoU95GQ08M1z2",
            "_score": 1,
            "_source": {
              "trace_id": "492223f90c99162e",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select visits0_.pet_id as pet_id4_6_0_, visits0_.id as id1_6_0_, visits0_.id as id1_6_1_, visits0_.visit_date as visit_da2_6_1_, visits0_.description as descript3_6_1_, visits0_.pet_id as pet_id4_6_1_ from visits visits0_ where visits0_.pet_id=13",
              "type": "jdbc",
              "error": false,
              "duration_ms": 0.15847,
              "db.user": "SA",
              "@timestamp": "2018-03-28T13:29:04.691+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "492223f90c99162e",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "69e3731e7da076d2"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.28",
            "_type": "spans",
            "_id": "71PMbGIBoU95GQ08M1z2",
            "_score": 1,
            "_source": {
              "trace_id": "492223f90c99162e",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select pettype0_.id as id1_3_0_, pettype0_.name as name2_3_0_ from types pettype0_ where pettype0_.id=6",
              "type": "jdbc",
              "error": false,
              "duration_ms": 0.149008,
              "db.user": "SA",
              "@timestamp": "2018-03-28T13:29:04.681+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "492223f90c99162e",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "6206489914b40c04"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.28",
            "_type": "spans",
            "_id": "7VPMbGIBoU95GQ08M1z2",
            "_score": 1,
            "_source": {
              "trace_id": "492223f90c99162e",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select distinct owner0_.id as id1_0_0_, pets1_.id as id1_1_1_, owner0_.first_name as first_na2_0_0_, owner0_.last_name as last_nam3_0_0_, owner0_.address as address4_0_0_, owner0_.city as city5_0_0_, owner0_.telephone as telephon6_0_0_, pets1_.name as name2_1_1_, pets1_.birth_date as birth_da3_1_1_, pets1_.owner_id as owner_id4_1_1_, pets1_.type_id as type_id5_1_1_, pets1_.owner_id as owner_id4_1_0__, pets1_.id as id1_1_0__ from owners owner0_ left outer join pets pets1_ on owner0_.id=pets1_.owner_id where owner0_.last_name like '%'",
              "type": "jdbc",
              "error": false,
              "duration_ms": 0.554853,
              "db.user": "SA",
              "@timestamp": "2018-03-28T13:29:04.665+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "492223f90c99162e",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "7ef2ace0ec2bbe10"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.28",
            "_type": "spans",
            "_id": "7lPMbGIBoU95GQ08M1z2",
            "_score": 1,
            "_source": {
              "trace_id": "492223f90c99162e",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select pettype0_.id as id1_3_0_, pettype0_.name as name2_3_0_ from types pettype0_ where pettype0_.id=1",
              "type": "jdbc",
              "error": false,
              "duration_ms": 0.284367,
              "db.user": "SA",
              "@timestamp": "2018-03-28T13:29:04.680+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "492223f90c99162e",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "4e9e4056772eaa3f"
            }
          },
          {
            "_index": "stagemonitor-spans-2018.03.28",
            "_type": "spans",
            "_id": "8FPMbGIBoU95GQ08M1z2",
            "_score": 1,
            "_source": {
              "trace_id": "492223f90c99162e",
              "db.type": "HSQL Database Engine",
              "instance": "dev",
              "method": "SELECT",
              "db.statement": "select pettype0_.id as id1_3_0_, pettype0_.name as name2_3_0_ from types pettype0_ where pettype0_.id=2",
              "type": "jdbc",
              "error": false,
              "duration_ms": 0.148362,
              "db.user": "SA",
              "@timestamp": "2018-03-28T13:29:04.682+0000",
              "application": "Spring-Petclinic",
              "span.kind": "client",
              "parent_id": "492223f90c99162e",
              "peer.service": "SA@jdbc:hsqldb:mem:testdb",
              "stagemonitor.version": "0.87.5",
              "host": "ip-172-31-22-53",
              "name": "OwnerController#processFindForm",
              "id": "e355133eb17ffb7c"
            }
          }
        ]
      }
    },
    "status": 200,
    "config": {
      "method": "GET",
      "transformRequest": [
        null
      ],
      "transformResponse": [
        null
      ],
      "jsonpCallbackParam": "callback",
      "url": "../api/havana/index?index=stagemonitor-spans-2018.03.28",
      "headers": {
        "Accept": "application/json, text/plain, */*",
        "kbn-version": "6.2.2"
      }
    },
    "statusText": "OK"
  }
]

let dc = new d();
dc.setStrategy(new SStrategy());

describe('DataCleaner unit test with StackCleaner strategy', () =>{
  describe('#clean()', () => {
    let res = dc.cleanData(tmpData)
    it('should return an array when called, it evaluates all StackCleaner methods', () =>{
      res.should.be.an('object');
      res.should.have.deep.property('pageload')
    })
    it('returned object should have: pageload, http, query properties ', () =>{
      res.should.have.deep.property('pageload')
      res.should.have.deep.property('http')
      res.should.have.deep.property('query')
    })
  });
})
